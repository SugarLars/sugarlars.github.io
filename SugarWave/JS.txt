let t={};let o=undefined;let u=undefined;let s=undefined;let i=undefined;let w=undefined;let b=undefined;let p=undefined;let g=undefined;let f=undefined;let M=undefined;let y=undefined;let c=undefined;let v=undefined;let h=undefined;let m=undefined;let T=undefined;let x=undefined;let E=undefined;let A=undefined;let I=undefined;let S=undefined;let _=undefined;let k=undefined;let B=undefined;function R(e,n){a(e,function(e){n(e.i)})}function d(e,i){a(e,function(e){n(e.id,function(e){if(e.length===0)return;var n=[];e.forEach(e=>n.push(e.images.t));i(n)})})}function a(n,i){var e=t[n];if(e!==undefined){i(e)}else{l(n,function(e){if(e.length===0)return;t[n]=e[0];i(e[0])})}}function l(e,n){r("https://api.twitch.tv/helix/users?login="+e,n)}function n(e,n){r("https://api.twitch.tv/helix/chat/emotes?broadcaster_id="+e,n)}function r(e,n){fetch(e,{method:"GET",headers:{l:u,o:"Bearer "+i}}).then(e=>{if(e.ok)e.json().then(e=>n(e.data))})}function C(n){fetch("https://id.twitch.tv/oauth2/token?client_id="+u+"&client_secret="+s+"&grant_type=client_credentials",{method:"POST"}).then(e=>{if(e.ok)e.json().then(e=>n(e))})}function W(e){return Math.floor(Math.random()*e)}function z(e,n){return e+W(n-e+1)}function D(e){var n=e.length,i,t;while(0!==n){t=Math.floor(Math.random()*n);n--;i=e[n];e[n]=e[t];e[t]=i}return e}function G(e,n,i,t){if(e.u||e.v&&n.h||e.m&&n.p||e.g&&n.M||e.T&&(!n.h&&!n.p&&!n.M)){L(e,i,t)}}function L(e,n,i){var t=function(e){O([e])};var a=function(e){if(e.length!==0)O(e)};setTimeout(function(){if(e.type==="1"&&e.A.length!==0)O(e.A);else if(e.type==="2"&&k&&n!==undefined)R(n,t);else if(e.type==="3"&&k&&n!==undefined)d(n,a);else if(e.type==="4"&&k&&i!==undefined)R(i,t);else if(e.type==="5"&&k&&i!==undefined)d(i,a);else if(e.type==="6"&&k)R(o,t);else if(e.type==="7"&&k)d(o,a)},f)}function O(i){var e=$(".main-container");var t=Math.floor(e.width());var a=Math.floor(e.height());var f=Math.floor(t/g);var d=Math.floor(a/p);if(b==="1")var l=Math.floor(M/(p+g));else if(b==="2")var l=Math.floor(M/g);else if(b==="3")var l=Math.floor(M/p);var r=0;var o="";for(let n=0;n<p;n++){if(n===p-1){var u=(p-1)*d;var s=a-u}else{var u=n*d;var s=d}for(let e=0;e<g;e++){if(e===g-1){var c=(g-1)*f;var v=t-c}else{var c=e*f;var v=f}if(b==="1")var h=(e+n)*l+z(0,150);else if(b==="2")var h=e*l+z(0,150);else if(b==="3")var h=n*l+z(0,150);if(w&&r===0)i=D(i);var m="top:"+u+"px; left:"+c+"px; width:"+v+"px; height:"+s+"px; "+"animation-duration: "+M+"ms; animation-delay: "+h+"ms; animation-iteration-count: "+y+";";o+='<img class="animationWave" style="'+m+'" src="'+i[r]+'">';r=(r+1)%i.length}}e.I(o)}function P(e,n){return{enabled:e[n+"Enabled"],command:e[n+"Command"].toLowerCase(),type:e[n+"Type"],A:e[n+"Images"],u:e[n+"AllowEveryone"],v:e[n+"AllowBroadcaster"],m:e[n+"AllowModerator"],g:e[n+"AllowSubscriber"],T:e[n+"AllowRegular"]}}function j(e,n){return{enabled:e[n+"Enabled"],type:e[n+"Type"],A:e[n+"Images"]}}window.addEventListener("onWidgetLoad",function(e){var n=e.detail.S;o=e.detail.channel.username;u=n._;s=n.k;i=n.B;w=n.R;b=n.C;p=n.W;g=n.D;f=n.G;M=n.L;y=n.O;c=P(n,"command1");v=P(n,"command2");h=P(n,"command3");m=P(n,"command4");T=P(n,"command5");x=j(n,"follower");E=j(n,"sub");A=j(n,"resub");I=j(n,"host");S=j(n,"raid");_=j(n,"cheer");k=u.trim().length!==0&&i.trim().length!==0;B=c.enabled&&c.command.trim().length!==0||v.enabled&&v.command.trim().length!==0||h.enabled&&h.command.trim().length!==0||m.enabled&&m.command.trim().length!==0||T.enabled&&T.command.trim().length!==0});window.addEventListener("onEventReceived",function(e){if(e.detail.event.listener==="widget-button"){var n=e.detail.event.P;if(n==="testToken"&&k){R(o,function(e){O([e])})}else if(n==="generateToken"&&u.trim().length!==0&&s.trim().length!==0){C(function(e){console.log("############################################");console.log("Twitch token: "+e.$);console.log("Expires in: "+Math.round(e.j/(24*60*60))+" days");console.log("############################################")})}}else if(e.detail.listener==="message"){if(B){var i=e.detail.event.data;var t=i.q;var a={h:t===o,p:i.tags.F==="1",M:i.tags.H==="1"};var f=i.text.match(/\S+/g);var d=f[0].toLowerCase();var l=undefined;if(f.length>=2){l=f[1];if(l.charAt(0)==="@")l=l.substr(1)}if(c.enabled&&c.command===d)G(c,a,l,t);else if(v.enabled&&v.command===d)G(v,a,l,t);else if(h.enabled&&h.command===d)G(h,a,l,t);else if(m.enabled&&m.command===d)G(m,a,l,t);else if(T.enabled&&T.command===d)G(T,a,l,t)}}else{var r=e.detail.listener;var t=e.detail.event.name;if(r==="follower-latest"){if(x.enabled)L(x,undefined,t)}else if(r==="subscriber-latest"){if(E.enabled&&e.detail.event.J===1)L(E,undefined,t);else if(A.enabled&&e.detail.event.J>1)L(A,undefined,t)}else if(r==="host-latest"){if(I.enabled)L(I,undefined,t)}else if(r==="raid-latest"){if(S.enabled)L(S,undefined,t)}else if(r==="cheer-latest"){if(_.enabled)L(_,undefined,t)}}});